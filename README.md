# API –°–ª—É—á–∞–π–Ω—ã—Ö –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –§–∞–∫—Ç–æ–≤ (Node.js –≤–µ—Ä—Å–∏—è)

–≠—Ç–æ REST API –Ω–∞ Node.js/Express –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# Production —Ä–µ–∂–∏–º
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3000`

## üì° API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
```
GET /random-fact?user_id=12345
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "id": 42,
  "text": "–í —Å—Ä–µ–¥–Ω–µ–º —á–µ–ª–æ–≤–µ–∫ –∑–∞ –≤—Å—é –∂–∏–∑–Ω—å —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ –ø–æ—Ü–µ–ª—É–∏ 2 –Ω–µ–¥–µ–ª–∏."
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∞ –ø–æ ID
```
GET /fact/42
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–∫—Ç–æ–≤
```
GET /facts/count
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "total_facts": 245
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
```
GET /health
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "facts_loaded": 245,
  "uptime": 123.456,
  "timestamp": "2024-01-01T12:00:00.000Z"
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API
```
GET /stats
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "total_facts": 245,
  "total_users": 15,
  "total_requests": 234,
  "facts_range": {
    "min_id": 1,
    "max_id": 245
  }
}
```

## üí° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π**: –û–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–∫—Ç –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –ø–æ–¥—Ä—è–¥ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å –ª—é–±–æ–≥–æ –¥–æ–º–µ–Ω–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å**: –ö–æ–≥–¥–∞ –≤—Å–µ —Ñ–∞–∫—Ç—ã –ø–æ–∫–∞–∑–∞–Ω—ã, –∏—Å—Ç–æ—Ä–∏—è —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏**: –•—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Ñ–∞–∫—Ç–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

## üõ† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### JavaScript (Fetch API)
```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ñ–∞–∫—Ç–∞
async function getRandomFact(userId) {
    try {
        const response = await fetch(`http://localhost:3000/random-fact?user_id=${userId}`);
        const fact = await response.json();

        if (response.ok) {
            console.log(`–§–∞–∫—Ç #${fact.id}: ${fact.text}`);
            return fact;
        } else {
            console.error('–û—à–∏–±–∫–∞:', fact.error);
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:', error);
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
getRandomFact('user123');
```

### JavaScript (Axios)
```javascript
const axios = require('axios');

async function getRandomFact(userId) {
    try {
        const response = await axios.get(`http://localhost:3000/random-fact?user_id=${userId}`);
        console.log(`–§–∞–∫—Ç #${response.data.id}: ${response.data.text}`);
        return response.data;
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞:', error.response?.data || error.message);
    }
}
```

### Python
```python
import requests

def get_random_fact(user_id):
    try:
        response = requests.get(f'http://localhost:3000/random-fact?user_id={user_id}')
        response.raise_for_status()
        fact = response.json()
        print(f"–§–∞–∫—Ç #{fact['id']}: {fact['text']}")
        return fact
    except requests.RequestException as e:
        print(f"–û—à–∏–±–∫–∞: {e}")
        return None

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
fact = get_random_fact('user123')
```

### cURL
```bash
# –°–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç
curl "http://localhost:3000/random-fact?user_id=user123"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl "http://localhost:3000/health"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–∫—Ç–æ–≤
curl "http://localhost:3000/facts/count"

# –§–∞–∫—Ç –ø–æ ID
curl "http://localhost:3000/fact/42"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
curl "http://localhost:3000/stats"
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ [Render.com](https://render.com) –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

### –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [render.com](https://render.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π **Web Service**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —ç—Ç–æ—Ç Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `package.json` –∏ `Procfile`

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [RENDER_DEPLOY.md](RENDER_DEPLOY.md)

## üèó –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
facts-api-nodejs/
‚îú‚îÄ‚îÄ server.js           # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ facts.json          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤ (245 —Ñ–∞–∫—Ç–æ–≤)
‚îú‚îÄ‚îÄ package.json        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ Procfile           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Render
‚îú‚îÄ‚îÄ .gitignore         # –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã Git
‚îú‚îÄ‚îÄ test_api.js        # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ quick_test.js      # –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç API
‚îú‚îÄ‚îÄ RENDER_DEPLOY.md   # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ —Ñ–∞–∫—Ç–æ–≤:** 245
- **–î–∏–∞–ø–∞–∑–æ–Ω ID:** 1-245
- **–Ø–∑—ã–∫:** Node.js
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Express.js
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π:** ‚úÖ

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ù–∞ Render.com
1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [render.com](https://render.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π **Web Service**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
   - **Environment**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`

### –ù–∞ Heroku
```bash
# –°–æ–∑–¥–∞–π—Ç–µ Procfile
echo "web: npm start" > Procfile

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é PORT
# Heroku –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç PORT
```

### –ù–∞ VPS
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–º
npm install -g pm2
pm2 start server.js --name "facts-api"
pm2 startup
pm2 save
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
PORT=3000  # –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3000)
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
- –ò–∑–º–µ–Ω–∏—Ç–µ `facts.json` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–∫—Ç–æ–≤
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É –≤ `server.js` –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –î–æ–±–∞–≤—å—Ç–µ middleware –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, rate limiting –∏ —Ç.–¥.

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "facts.json not found"
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la facts.json

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod 644 facts.json
```

### –û—à–∏–±–∫–∞: "Port already in use"
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ—Ä—Ç
lsof -i :3000

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
PORT=3001 npm start
```

### –û—à–∏–±–∫–∞: "Cannot read property 'length' of undefined"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å facts.json
node -e "console.log(JSON.parse(require('fs').readFileSync('facts.json', 'utf8')).length)"
```

## üîÑ API vs Python –≤–µ—Ä—Å–∏—è

| –§—É–Ω–∫—Ü–∏—è | Node.js | Python |
|---------|---------|---------|
| –°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ | ‚ö° –ë—ã—Å—Ç—Ä–µ–µ | üêå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ |
| –ü–∞–º—è—Ç—å | üíæ –ú–µ–Ω—å—à–µ | üìà –ë–æ–ª—å—à–µ |
| –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ | üü¢ –ü—Ä–æ—â–µ | üü° –°–ª–æ–∂–Ω–µ–µ |
| –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ | üìö –û–≥—Ä–æ–º–Ω–∞—è | üìñ –ë–æ–ª—å—à–∞—è |
| –¢–∏–ø–∏–∑–∞—Ü–∏—è | ‚ùå –ù–µ—Ç | ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ |

## ü§ù Contributing

1. Fork –ø—Ä–æ–µ–∫—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π. MIT License.
